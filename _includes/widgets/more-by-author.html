{% 
    assign author_books_by_year = site.posts 
                    | where_exp:"post", "post.author == page.author"                    
                    | sort: "published"
                    | group_by: "published"
%}


{% for item in author_books_by_year %}
   {% assign sorted = item['items'] | sort: 'series_order' %}
   {% if forloop.first %}
      {% assign author_books = sorted %}
   {% else %}
      {% assign author_books = author_books | concat: sorted %}
   {% endif %}
{% endfor %}

<section class="related-posts grid-3">

	<h4 class="section-head"><span class="title">More by {{ page.author }}</span></h4> 
	
	<div class="ts-row posts cf">

        {% for book in author_books %}
        <article class="post col-4">                
            <a href="{{ site.baseurl }}{{ book.uri }}" title="{{ book.title }}" class="image-link">
                <img width="270" height="180" 
                     src="{{ site.baseurl }}/assets/books/{{ book.cover }}" loading="lazy"
                     class="image wp-post-image lazyloaded" 
                     alt="{{ book.author }} - {{ book.title }}"
                     title="{{ book.author }} - {{ book.title }}" />
            </a>
        
            <div class="content">                
                <h3 class="post-title"><a href="{{ site.baseurl }}{{ book.uri }}" class="post-link">{{ book.title }}</a></h3>
                <div class="post-meta">
                    <time class="post-date" datetime="{{ book.published }}">{{ book.published }}</time>
                </div>
            </div>
		</article>
        {% endfor %}
		
	</div>
	
</section>